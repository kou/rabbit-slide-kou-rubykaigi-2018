= My way with Ruby

: author
   Kouhei Sutou
: institution
   ClearCode Inc.
: content-source
   RubyKaigi 2018
: date
   2018-06-01
: start-time
   2018-06-01T09:40:00+09:00
: end-time
   2018-06-01T10:35:00+09:00
: theme
   .

= Ad: Silver sponsor

  # img
  # src = images/clear-code-rubykaigi-2018-silver-sponsor.png
  # relative_height = 100
  # reflect_ratio = 0.1

== Slide properties

: enable-title-on-image
   false

= Keynote-ish topic\n(('note:ã‚­ãƒ¼ãƒãƒ¼ãƒˆã£ã½ã„è©±é¡Œ'))

Did you think about it?\n
(('note:è€ƒãˆãŸã“ã¨ã‚ã‚‹ï¼Ÿ'))

= Keynote-ish topic1\n(('note:ã‚­ãƒ¼ãƒãƒ¼ãƒˆã£ã½ã„è©±é¡Œ1'))

Future\n
(('note:æœªæ¥ã®ã“ã¨'))

= Keynote-ish topic2\n(('note:ã‚­ãƒ¼ãƒãƒ¼ãƒˆã£ã½ã„è©±é¡Œ2'))

Focus on\n
one thing\n
((*deeply*))\n
(('note:ãªã«ã‹ã‚’æ·±æ˜ã‚Š'))

= Keynote-ish topic3\n(('note:ã‚­ãƒ¼ãƒãƒ¼ãƒˆã£ã½ã„è©±é¡Œ3'))

Overview\n
(('note:ä¿¯ç°ã—ãŸè©±'))

= My activities\nas a Rubyist\n(('note:ç§ã®Rubyistæ´»å‹•'))

  * Increase what Ruby can\n
    (('note:Rubyã§ã§ãã‚‹ã“ã¨ã‚’å¢—ã‚„ã™'))
  * Maintain libraries\n
    (('note:ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹'))

= The number of developing libraries\n(('note:é–‹ç™ºã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼æ•°'))

About 130\n
(('note:130ãã‚‰ã„'))

= How to find targets?\n(('note:ãã‚“ãªã«ãƒã‚¿ãŒã‚ã‚‹ã®ï¼Ÿ'))

Just I needed\n
(('note:å˜ã«è‡ªåˆ†ãŒå¿…è¦ã ã£ãŸã‹ã‚‰'))

= Today's topic\n(('note:ä»Šæ—¥ã®è©±é¡Œ'))

Overview\n
what we can do\n
((*with Ruby*))\n
(('note:Rubyã§ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã“ã¨ã‚’ãŸãã•ã‚“ç´¹ä»‹'))

= Category1\n(('note:åˆ†é¡1'))

Web feed\n
(('note:Webãƒ•ã‚£ãƒ¼ãƒ‰'))

= RSS Parser

RSS/Atom parser\n
with\n
((*validation*))\n
(('note:ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ä»˜ãã®RSS/Atomãƒ‘ãƒ¼ã‚µãƒ¼'))

= RSS Parser - History\n(('note:æ­´å²'))

  * 2003-05: The first release\n
    (('note:æœ€åˆã®ãƒªãƒªãƒ¼ã‚¹'))
    * No other RSS/Atom parser that supports validation even now\n
      (('note:ä»Šã§ã‚‚ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã®ãƒ‘ãƒ¼ã‚µãƒ¼ã¯ä»–ã«ãªã„'))
  * 2004-01: Ruby bundles this\n
    (('note:RubyãŒRSS Parserã‚’ãƒãƒ³ãƒ‰ãƒ«'))
    * I became a Ruby committer\n
      (('note:Rubyã‚³ãƒŸãƒƒã‚¿ãƒ¼ã«ãªã‚‹'))

= Validate RSS/Atom\n(('note:RSS/Atomã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³'))

  * Important for me\n
    (('note:ç§ã«ã¨ã£ã¦ã¯å¤§äº‹'))
  * Most wild RSS/Atom feeds are\n
    ((*invalid*))\n
    (('note:é‡ç”Ÿã®RSS/Atomã®å¤šãã¯ä¸æ­£'))
    * Validation helps to find problems\n
      (('note:ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã¨å•é¡Œã‚’è¦‹ã¤ã‘ã‚„ã™ããªã‚‹'))

= RSS::Parser.parse

  # coderay ruby

  # Validates by default
  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  RSS::Parser.parse(rss)
  # Validation can be disabled
  # ç„¡åŠ¹ã«ã§ãã‚‹
  RSS::Parser.parse(rss, false)

= Since Ruby 2.6\n(('note:Ruby 2.6ä»¥é™'))

  # coderay ruby

  # Supports keyword argument
  # ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°å¯¾å¿œ
  parse(rss, validate: false)

= REXML

XML parser\n
written in\n
((*pure Ruby*))\n
(('note:Rubyå®Ÿè£…ã®XMLãƒ‘ãƒ¼ã‚µãƒ¼'))

= REXML - History\n(('note:æ­´å²'))

  * 2001: Started by Sean Russell\n
    (('note:Seanã•ã‚“ãŒé–‹ç™ºã‚’é–‹å§‹'))
    * Based on Electric XML (Java)\n
      (('note:Javaå®Ÿè£…ã®Electric XMLã‚’å‚è€ƒã«é–‹ç™º'))
    * REXML is "Ruby Electric XML"\n
      (('note:REXMLã¯ã€ŒRuby Electric XMLã€'))
  * 2003-01: Ruby bundles this\n
    (('note:RubyãŒREXMLã‚’ãƒãƒ³ãƒ‰ãƒ«'))

= REXML - Side story\n(('note:ãŠã¾ã‘è©±'))

  * Sean was "æ›¸é‹" in Kanji\n
    (('note:Seanã•ã‚“ã«ã¯ã€Œæ›¸é‹ã€ã¨ã„ã†æ¼¢å­—è¡¨è¨˜ãŒã‚ã£ãŸ'))
  * He was interested in Japan\n
    (('note:æ—¥æœ¬å¥½ãã ã£ãŸ'))
    * (('tag:x-small'))"How to write your name in Kanji?"\n
      (('note:ã€Œå›ã®åå‰ã¯æ¼¢å­—ã§ã©ã†æ›¸ãã®ï¼Ÿã€'))
  * We can connect with Ruby!\n
    (('note:Rubyistã¯Rubyã‚’ãã£ã‹ã‘ã«ã¤ãªãŒã‚Œã‚‹ï¼'))

= Ad: Code Party\n(('note:å®£ä¼ï¼šã‚³ãƒ¼ãƒ‰æ‡‡è¦ªä¼š'))

  # img
  # src = images/code-party.png
  # relative_height = 100
  # reflect_ratio = 0.1

== Slide properties

: enable-title-on-image
   false

= Ad: Code Party\n(('note:å®£ä¼ï¼šã‚³ãƒ¼ãƒ‰æ‡‡è¦ªä¼š'))

(('tag:center'))
This is a challenge\n
(('note:å®Ÿé¨“çš„ãªä¼ç”»'))

  * Ruby focus to have fun\n
    (('note:Rubyã¯æ¥½ã—ã•ã‚’å¤§äº‹ã«ã—ã¦ã„ã‚‹'))
  * We have fun writing Ruby\n
    (('note:Rubyistã¯æ¥½ã—ãRubyã‚’æ›¸ã„ã¦ã„ã‚‹'))
  * We have fun together with writing Ruby at after party!?\n
    (('note:ã ã£ãŸã‚‰æ‡‡è¦ªä¼šã§ä¸€ç·’ã«Rubyã‚’æ›¸ãã¨æ¥½ã—ãã†ï¼ï¼Ÿ'))

= Ad: Code Party\n(('note:å®£ä¼ï¼šã‚³ãƒ¼ãƒ‰æ‡‡è¦ªä¼š'))

  * Matz attends Code Party\n
    (('note:ã¾ã¤ã‚‚ã¨ã•ã‚“ã‚‚ã‚³ãƒ¼ãƒ‰æ‡‡è¦ªä¼šã«å‚åŠ '))
  * Sponsored by Speee, Inc.\n
    (('note:Speeeã•ã‚“ãŒã‚¹ãƒãƒ³ã‚µãƒ¼'))

= REXML - Recent1\n(('note:æœ€è¿‘1'))

  * 2010-08: RubyKaigi 2010
    * I became the maintainer\n
      (('note:ç§ãŒãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼ã«ãªã£ãŸ'))
    * Because RSS Parser uses it\n
      (('note:RSS ParserãŒä½¿ã£ã¦ã„ã‚‹ã‹ã‚‰'))

= REXML - Recent2\n(('note:æœ€è¿‘2'))

  * 2016: (({element[attribute_name]}))
    * Ruby 2.5 ships it\n
      (('note:Ruby 2.5ä»¥é™ã§ä½¿ãˆã‚‹'))

= REXML - Recent3\n(('note:æœ€è¿‘3'))

  * 2018: Fix XPath related bugs\n
    (('note:XPathé–¢é€£ã®ãƒã‚°ä¿®æ­£'))
    * Ruby 2.6 ships it\n
      (('note:Ruby 2.6ä»¥é™ã§ä½¿ãˆã‚‹'))

= REXML - Future?\n(('note:æœªæ¥ã¯ã‚ã‚‹ã®ï¼Ÿ'))

  * ((*Pure Ruby*)) is valuable\n
    (('note:Rubyã ã‘ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã“ã¨ã«ã¯ä¾¡å€¤ãŒã‚ã‚‹'))
    * Easy to install\n
      (('note:ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒç°¡å˜'))
    * JIT may improve performance\n
      (('note:NOTE: We should improve general logic before we expect JIT to improve performanceğŸ˜‰'))\n
      (('note:JITã§é€Ÿããªã‚‹ã‹ã‚‚ã—ã‚Œãªã„'))\n
      (('note:JITã®å‰ã«æ™®é€šã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ”¹è‰¯ã™ã‚‹ã®ãŒå…ˆã ã‘ã©ã­ğŸ˜‰'))\n

= Recent my works\n(('note:æœ€è¿‘ã®ä»•äº‹'))

  * XML/HTML libraries for LuaJIT\n
    (('note:LuaJITç”¨ã®XML/HTMLãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼'))
    * XMLua: (('tag:xx-small:((<URL:https://clear-code.github.io/xmlua/>))'))\n
      libxml2 based XML/HTML parser
    * LuaCS: (('tag:xx-small:((<URL:https://clear-code.github.io/luacs/>))'))\n
      CSS Selectorsâ†’XPath converter
  * Found what lacks in REXML API\n
    (('note:REXMLã®APIã«è¶³ã‚Šãªã„ã‚‚ã®ã¯ãªã«ã‹è€ƒãˆãŸ'))

= REXML - Future1\n(('note:æœªæ¥1'))

Introduce NodeSet\n
(('note:NodeSetãŒè¶³ã‚Šãªã„ã‚“ã˜ã‚ƒãªã„ã‹'))

= REXML - NodeSet

  # coderay ruby
  doc.
    search("//list"). # => NodeSet
    search("item"). # => All <item> in <list>
    text # All texts in <item> in <list>

= REXML - Future2\n(('note:æœªæ¥2'))

Support\n
CSS Selectors\n
(('note:CSSã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ãŒè¶³ã‚Šãªã„ã‚“ã˜ã‚ƒãªã„ã‹'))

= REXML - CSS Selectors\n(('note:CSSã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼'))

  # coderay ruby
  doc.css_select("ul li, dl dt")

= REXML - Future3\n(('note:æœªæ¥3'))

Support\n
HTML5 support\n
(('note:HTML5å¯¾å¿œãŒè¶³ã‚Šãªã„ã‚“ã˜ã‚ƒãªã„ã‹'))

= REXML - HTML5

  # coderay ruby

  doc = REXML::HTML5Document.new(html5)
  doc.search("//li")
  doc.css_select("ul li")

= REXML - Future\n(('note:æœªæ¥'))

  * Low priority in my activities\n
    (('note:å„ªå…ˆåº¦ã¯é«˜ããªã„'))
  * Do you want to work with me?\n
    (('note:ä¸€ç·’ã«ã‚„ã‚ŠãŸã„äººã¯ã„ã‚‹ï¼Ÿ'))

= Category2\n(('note:åˆ†é¡1'))

Presentation\n
(('note:ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³'))

= Rabbit

(('tag:center'))
(('tag:large'))
Presentation tool\n
for ((*Rubyist*))\n
(('note:Rubyistç”¨ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ„ãƒ¼ãƒ«'))

((' '))

= Rabbit - History\n(('note:æ­´å²'))

  * 2004-07: The first release\n
    (('note:æœ€åˆã®ãƒªãƒªãƒ¼ã‚¹'))
    * No other presentation tool for Rubyist even now\n
      (('note:ä»Šã§ã‚‚Rubyistç”¨ã®ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ„ãƒ¼ãƒ«ã¯ä»–ã«ãªã„'))
  * 2010: Matz migrated to Rabbit\n
    (('note:ã¾ã¤ã‚‚ã¨ã•ã‚“ãŒRabbitã«ä¹—ã‚Šæ›ãˆãŸ'))
    * Since RubyKaigi 2010?\n
      (('note:RubyKaigi 2010ã‹ã‚‰ï¼Ÿ'))

= For Rubyist?\n(('note:Rubyistå‘ã‘ã«å¿…è¦ãªã‚‚ã®'))

RD support\n
(('note:RDã‚µãƒãƒ¼ãƒˆ'))

= RD

  * ((*R*))uby ((*D*))ocument\n
    * Designed by Matz (('note:(Right?)'))\n
      (('note:ã¾ã¤ã‚‚ã¨ã•ã‚“ãŒãƒ‡ã‚¶ã‚¤ãƒ³ã—ãŸã¯ãš'))
  * A text based markup language\n
    (('note:ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—è¨€èª'))
    * Version controllable\n
      (('note:ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã§ãã‚‹'))

= For Rubyist?\n(('note:Rubyistå‘ã‘ã«å¿…è¦ãªã‚‚ã®'))

Publish\n
our slides\n
as usual\n
(('note:ã„ã¤ã‚‚é€šã‚Šã‚¹ãƒ©ã‚¤ãƒ‰ã‚’å…¬é–‹ã§ãã‚‹'))

= Publish as usual\n(('note:ã„ã¤ã‚‚é€šã‚Šå…¬é–‹'))

  # coderay console
  % gem push your-slide-1.0.gem

= Published!\n(('note:å…¬é–‹å®Œäº†ï¼'))

  # img
  # src = images/rabbit-slide-show.png
  # relative_height = 78

(('tag:center'))
(('tag:small'))
((<URL:https://slide.rabbit-shocker.org/>))

= What's needed for presentation tool?\n(('note:ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ„ãƒ¼ãƒ«ã«å¿…è¦ãªã‚‚ã®'))

GUI

= Ruby/GTK3

Multi-platform GUI toolkit\n
(('note:è¤‡æ•°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œGUIãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆ'))

= Ruby/GTK3 - History\n(('note:æ­´å²'))

  * 1998-01: 1st release by Matz\n
    ((<[ruby-list:5877]|URL:http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-list/5877>))\n
    (('note:ã¾ã¤ã‚‚ã¨ã•ã‚“ãŒæœ€åˆã®ãƒªãƒªãƒ¼ã‚¹'))
  * 2004-05: I joined development\n
    (('note:ç§ãŒé–‹ç™ºã«å‚åŠ '))

= Example - Window

  # coderay ruby
  require "gtk3"
  app = Gtk::Application.new
  app.signal_connect(:activate) do
    window = Gtk::ApplicationWindow.new(app)
    window.show_all
  end
  app.run

= Approaches on\nmissing libraries(1)\n(('note:ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ãŒãªã„æ™‚ã®ã‚„ã‚Šæ–¹ï¼ˆ1ï¼‰'))

  (1) Implement only the needed features\n
      (('note:å¿…è¦ãªæ©Ÿèƒ½ã ã‘å®Ÿè£…'))
  (2) then back to Rabbit\n
      (('note:å¿…è¦ãªæ©Ÿèƒ½ãŒã§ããŸã‚‰Rabbitã«æˆ»ã‚‹'))

= Approaches on\nmissing libraries(2)\n(('note:ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ãŒãªã„æ™‚ã®ã‚„ã‚Šæ–¹ï¼ˆ2ï¼‰'))

  (1) Implement not only the needed features\n
      (('note:å¿…è¦ãªæ©Ÿèƒ½ã ã‘ã˜ã‚ƒãªã'))
  (2) but also (('note:almost')) all features\n
      (('note:ã»ã¼ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’å®Ÿè£…'))
  (3) then back to Rabbit\n
      (('note:çµ‚ã‚ã£ãŸã‚‰Rabbitã«æˆ»ã‚‹'))

= My approach\n(('note:ç§ã®ã‚„ã‚Šæ–¹'))

Implement\n
all features\n
(('note:testing with Rabbit'))\n
(('note:ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’å®Ÿè£…'))

= My priority\n(('note:ç§ã®å„ªå…ˆåº¦'))

  * Rabbit is important\n
    (('note:Rabbitã¯å¤§äº‹ã ã‘ã©'))
  * Increasing what Ruby can is important too\n
    (('note:Rubyã§ã§ãã‚‹ã“ã¨ã‚’å¢—ã‚„ã™ã®ã‚‚å¤§äº‹'))

= GTK+ 3 - Size\n(('note:ã‚µã‚¤ã‚º'))

3000 over API\n
(('note:3000ä»¥ä¸Šã®API'))

= How to implement\n(('note:å®Ÿè£…æ–¹æ³•'))

Handwriting\n
(('note:æ‰‹æ›¸ã'))\n
â†“\n
Auto generation\n
(('note:è‡ªå‹•ç”Ÿæˆ'))

= Ruby/GI

(('tag:center'))
(('tag:large'))
Generate bindings\n
automatically\n
at run-time\n
(('note:å®Ÿè¡Œæ™‚ã«è‡ªå‹•ã§ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’ç”Ÿæˆ'))

(('note:GI: GObject Introspection'))

= Ruby/GI - History\n(('note:æ­´å²'))

  * 2012: The first commit by me\n
    (('note:æœ€åˆã®ã‚³ãƒŸãƒƒãƒˆ'))
  * 2014: Ruby/GTK3 used Ruby/GI\n
    (('note:Ruby/GTK3ã‚’Ruby/GIãƒ™ãƒ¼ã‚¹ã«ç§»è¡Œ'))

= Handwriting\n(('note:æ‰‹æ›¸ã'))

  # img
  # src = images/ruby-gtk3-without-ruby-gi.svg
  # relative_width = 100

== Slide properties

: enable-title-on-image
   false

= Auto generation\n(('note:è‡ªå‹•ç”Ÿæˆ'))

  # img
  # src = images/ruby-gtk3-with-ruby-gi.svg
  # relative_width = 100

== Slide properties

: enable-title-on-image
   false

= Performance(('note:ï¼ˆæ€§èƒ½ï¼‰'))

  * Slower than handwriting\n
    (('note:æ‰‹æ›¸ãã‚ˆã‚Šé…ã„'))
  * Overhead\n
    (('note:ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰'))
    * Dynamic arguments conversion\n
      (('note:å‹•çš„ãªå¼•æ•°ã®å¤‰æ›'))
    * libffi based function call\n
      (('note:libffiã‚’ä½¿ã£ãŸé–¢æ•°å‘¼ã³å‡ºã—'))

= Improve idea(('note:ï¼ˆæ”¹å–„æ¡ˆï¼‰'))

JIT

= JIT

  # coderay c

  VALUE rb_method_generic() {
    func = dlsym(name); ...
    ffi_call(func, ..., &result);
    return C2RB(result);
  } â†“
  // Build rb_method() at run-time and call it.
  VALUE rb_method() {return C2RB(name(...));}

= Ruby/GI - See also\n(('note:å‚è€ƒæƒ…å ±'))

  * "How to create bindings 2016" at RubyKaigi 2016\n
    * (('tag:xx-small'))
      ((<URL:http://rubykaigi.org/2016/presentations/ktou.html>))
  * "GI Introduction" (('note:(in Japanese)'))\n
    (('note:ã€ŒGObject Introspectionå…¥é–€ã€'))
    * (('tag:xx-small'))
      ((<URL:https://github.com/RubyData/workshop-materials/blob/master/gobject-introspection/introduction.md>))
    * Build system: Meson + Ninja\n
      (('note:ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ï¼šMeson + Ninja'))

= Ruby/GI based bindings\n(('note:Ruby/GIãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°'))

Ruby/Pango

= Ruby/Pango

(('tag:center'))
(('tag:large'))
Text layout engine\n
with\n
i18n support\n
(('note:å›½éš›åŒ–å¯¾å¿œã®ãƒ†ã‚­ã‚¹ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¨ãƒ³ã‚¸ãƒ³'))

(('note:i18n: Internationalization'))

= Prohibition processing\n(('note:ç¦å‰‡å‡¦ç†'))

  # coderay ruby

  widget.signal_connect(:draw) do |_, context|
    layout = context.create_pango_layout
    layout.text = "Helloã“ã‚“ã«ã¡ã¯ã€‚ğŸ£"
    context.show_pango_layout(layout)
    GLib::Source::CONTINUE
  end

= Bidirectional text\n(('note:åŒæ–¹å‘ãƒ†ã‚­ã‚¹ãƒˆ'))

Hello

Ù…Ø±Ø­Ø¨Ø§

ã“ã‚“ã«ã¡ã¯

= Ruby/GI based bindings\n(('note:Ruby/GIãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°'))

Ruby/GdkPixbuf2

= Ruby/GdkPixbuf2

Image manipulation\n
(('note:ç”»åƒæ“ä½œ'))

= Half image\n(('note:ç”»åƒã‚’åŠåˆ†ã«'))

  # coderay ruby

  require "gdk_pixbuf2"
  # Load an image: Format is auto detected
  pixbuf = GdkPixbuf::Pixbuf.new(file: "x.png")
  # Scale to half size
  half = pixbuf.scale(pixbuf.width / 2,
                      pixbuf.height / 2,
                      :bilinear)
  # Save as different format
  half.save("half.jpg")

= Animation GIF\n(('note:ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³GIF'))

  # img
  # src = images/the-tortoise-and-the-hare.gif
  # relative_width = 100

== Slide properties

: enable-title-on-image
   false

= Ruby/GI based bindings\n(('note:Ruby/GIãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°'))

Ruby/Poppler

= Ruby/Poppler

PDF\n
parser/renderer\n
(('note:PDFãƒ‘ãƒ¼ã‚µãƒ¼ãƒ»ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼'))

= Text extraction\n(('note:ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º'))

  # coderay ruby

  require "poppler"
  doc = Poppler::Document.new("x.pdf")
  doc.each do |page|
    puts(page.text) # Extract all texts
  end

= Embed PDF\n(('note:PDFã®åŸ‹ã‚è¾¼ã¿'))

  # image
  # src = images/rubykaigi-2017-extension-by-cpp-title.pdf
  # relative_height = 80
  # reflect_ratio = 0.1

(('tag:center'))
(('tag:xx-small'))
((<URL:http://rubykaigi.org/2017/presentations/ktou.html>))

== Slide properties

: enable-title-on-image
   false

= Ruby/GI based bindings\n(('note:Ruby/GIãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°'))

Ruby/GStreamer

= Ruby/GStreamer

(('tag:center'))
(('tag:large'))
Audio/Video player\n
(('note:éŸ³å£°ãƒ»å‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼'))

(('note:(*) Streaming media framework'))\n
(('note:æœ¬å½“ã¯ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯'))

= Camera(('note:ï¼ˆã‚«ãƒ¡ãƒ©ï¼‰'))

  # coderay ruby

  require "gst"
  description = [
    "autovideosrc",  # Camera
    "videoconvert",  # Filter
    "autovideosink", # Window
  ].join(" ! ")
  pipeline = Gst.parse_launch(description)
  pipeline.play
  until pipeline.bus.poll.type.eos? do
  end # Main loop
  pipeline.stop

= Face detection(('note:ï¼ˆé¡”èªè­˜ï¼‰'))

  # coderay ruby

  description = [
    "autovideosrc",  # Camera
    "videoconvert",  # Filter
    "facedetect",    # Face detection (!)
    "videoconvert",  # Filter         (!)
    "autovideosink", # Window
  ].join(" ! ")
  pipeline = Gst.parse_launch(description)
  pipeline.play

# = Embed video

# TODO

# #  # video
# #  # src = test.mp4

= What's needed for presentation tool?\n(('note:ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ„ãƒ¼ãƒ«ã«å¿…è¦ãªã‚‚ã®'))

PDF output\n
(('note:PDFå‡ºåŠ›'))

= rcairo

2D graphics renderer\n
(('note:2æ¬¡å…ƒç”»åƒãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼'))

= rcairo - Outputs\n(('note:å‡ºåŠ›'))

  * PNGãƒ»SVG
  * ((*PDF*))
  * ((*Display*)) (X/macOS/Windows)
  * ...

= rcairo - History\n(('note:æ­´å²'))

  * 2003-10: The initial commit\n
    (('note:æœ€åˆã®ã‚³ãƒŸãƒƒãƒˆ'))
  * 2005-09: I started developing\n
    (('note:ç§ãŒé–‹ç™ºã«å‚åŠ '))

= Red A4 PDF\n(('note:èµ¤ã„A4ã®PDFã‚’å‡ºåŠ›'))

  # coderay ruby

  require "cairo"
  include Cairo
  PDFSurface.create("x.pdf", "A4") do |surface|
    Context.create(surface) do |context|
      context.set_source_color(:red)
      context.paint
    end
  end

= rcairo - GC

    # image
    # src = images/cairo-no-gc-trigger.pdf
    # align = right
    # vertical_align = bottom
    # relative_width = 65
    # relative_padding_right = -7
    # relative_padding_bottom = -10

  # coderay ruby
  1000.times do
    Cairo::ImageSurface.new(:argb32, 6000, 6000)
  end

(('tag:margin-bottom * 20'))

= GC - Cause(('note:ï¼ˆåŸå› ï¼‰'))

    # image
    # src = images/cairo-no-gc-trigger.pdf
    # align = right
    # vertical_align = bottom
    # relative_width = 67
    # relative_padding_right = -11
    # relative_padding_bottom = -10

  * GC isn't ran enough frequency\n
    (('note:GCã®å®Ÿè¡Œé »åº¦ãŒååˆ†ã˜ã‚ƒãªã‹ã£ãŸ'))
    * Because Ruby doesn't know how many memory used by cairo\n
      (('note:Rubyã¯cairoã®ãƒ¡ãƒ¢ãƒªãƒ¼ä½¿ç”¨é‡ã‚’çŸ¥ã‚‰ãªã„ã‹ã‚‰'))

(('tag:margin-bottom * 16'))

= GC - Fix(('note:ï¼ˆä¿®æ­£ï¼‰'))

    # image
    # src = images/cairo-gc-trigger.pdf
    # align = right
    # vertical_align = bottom
    # relative_width = 67
    # relative_padding_right = -11
    # relative_padding_bottom = -10

  * (({rb_gc_adjust_memory_usage()}))
    * Improve GC frequency(('note:ï¼ˆGCå®Ÿè¡Œé »åº¦ã‚’æ”¹å–„ï¼‰'))
  * Ruby 2.4 ships it(('note:ï¼ˆRuby 2.4ä»¥é™ï¼‰'))

(('tag:margin-bottom * 18'))

= Easy to install\n(('note:ç°¡å˜ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«'))

Important\n
(('note:å¤§äº‹'))

= native-package-installer

Install\n
system packages\n
on (({gem install}))\n
(('note:gem installæ™‚ã«ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«'))

= extconf.rb/Rakefile

  # coderay ruby

  require "pkg-config"
  require "native-package-installer"
  unless PKGConfig.check_version?("gdk-3.0")
    packages = {
      altlinux: "libgtk+3-devel",
      debian: "libgtk-3-dev",
      redhat: "pkgconfig(gdk-3.0)",
      homebrew: "gtk+3",
      macports: "gtk3",
      msys2: "gtk3",
    }
    unless NativePackageInstaller.install(packages)
      exit(false)
    end
  end

= rake-compiler

Build fat gem\n
by\n
cross compile\n
(('note:ã‚¯ãƒ­ã‚¹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§fat gemã‚’ãƒ“ãƒ«ãƒ‰'))

= rake-compiler - History\n(('note:æ­´å²'))

  * 2008-11: The first commit\n
    (('note:æœ€åˆã®ã‚³ãƒŸãƒƒãƒˆ'))
  * 2014-12: Orphan\n
    (('note:ã ã‚Œã‹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼å¤‰ã‚ã£ã¦ãƒ¼'))
  * 2014-12:\n
    I became the maintainer\n
    (('note:ç§ãŒãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼ã«ãªã£ãŸ'))

= Category3\n(('note:åˆ†é¡3'))

Test\n
(('note:ãƒ†ã‚¹ãƒˆ'))

= test-unit

Testing framework\n
to write tests\n
((*in Ruby*))\n
(('note:Rubyã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ã‘ã‚‹ãƒ†ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯'))

= test-unit - History\n(('note:æ­´å²'))

  * 2003-02: Import to Ruby\n
    (('note:Rubyã«å–ã‚Šè¾¼ã¾ã‚Œã‚‹'))
  * 2008-05:\n
    I became the maintainer\n
    (('note:ç§ãŒãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼ã«ãªã£ãŸ'))
  * 2008-10: Removed from Ruby\n
    (('note:Rubyã‹ã‚‰å‰Šé™¤'))

(('note:See also: "The history of testing framework in Ruby"'))\n
(('tag:x-small'))((<URL:http://rubykaigi.org/2015/presentations/kou>))

= test-unit - New feature\n(('note:æ–°æ©Ÿèƒ½'))

Grouping\n
(('note:ã‚°ãƒ«ãƒ¼ãƒ—åŒ–'))

= Grouping\n(('note:ã‚°ãƒ«ãƒ¼ãƒ—åŒ–'))

  * The most important feature\n
    (('note:ä¸€ç•ªå¤§äº‹ãªæ©Ÿèƒ½'))
  * Keep tests maintainable\n
    (('note:ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã§ãã‚‹ãƒ†ã‚¹ãƒˆã‚’ç¶­æŒã§ãã‚‹'))

= Example(('note:ï¼ˆä¾‹ï¼‰'))

  # coderay ruby

  class StackTest < Test::Unit::TestCase
    class PushTest < self
      def test_XXX; end
    end
    class PopTest < self
      def test_XXX; end
    end
  end

= Method style(('note:ï¼ˆãƒ¡ã‚½ãƒƒãƒ‰å½¢å¼ï¼‰'))

  # coderay ruby

  class StackTest < Test::Unit::TestCase
    sub_test_case("#push") do
      def test_XXX; end
    end
    sub_test_case("#pop") do
      def test_XXX; end
    end
  end

= test-unit - New feature\n(('note:æ–°æ©Ÿèƒ½'))

Data driven test\n
(('note:ãƒ‡ãƒ¼ã‚¿é§†å‹•ãƒ†ã‚¹ãƒˆ'))

= Data driven test\n(('note:ãƒ‡ãƒ¼ã‚¿é§†å‹•ãƒ†ã‚¹ãƒˆ'))

  # coderay ruby

  data("positive", [3,  1, 2])
  data("negative", [-4, 1, -5])
  def test_add(data)
    expected, augend, addend = data
    assert_equal(expected,
                 add(augend, addend))
  end

= test-unit - New feature\n(('note:æ–°æ©Ÿèƒ½'))

Reverse backtrace\n
(('note:é€†é †ã®ãƒãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹'))

= Reverse backtrace\n(('note:é€†é †ã®ãƒãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹'))

  * Reverse backtrace only when terminal output\n
    (('note:ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‡ºåŠ›ã®ã¨ãã ã‘é€†é †'))
  * The same change as Ruby 2.5.0\n
    (('note:Ruby 2.5.0ã¨åŒã˜å¤‰æ›´'))

= test-unit - New feature\n(('note:æ–°æ©Ÿèƒ½'))

Test double\n
(('note:ãƒ†ã‚¹ãƒˆãƒ€ãƒ–ãƒ«'))

= test-unit-rr

RR integration\n
(('note:RRã¨ã®çµ±åˆ'))

= RR - History\n(('note:æ­´å²'))

  * 2007-06: The initial commit\n
    (('note:æœ€åˆã®ã‚³ãƒŸãƒƒãƒˆ'))
  * 2014-12: Orphan\n
    (('note:ã ã‚Œã‹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼å¤‰ã‚ã£ã¦ãƒ¼'))
  * 2015-05:\n
    I became the maintainer\n
    (('note:ç§ãŒãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼ã«ãªã£ãŸ'))

= Stub(('note:ï¼ˆã‚¹ã‚¿ãƒ–ï¼‰'))

  # coderay ruby

  adder = Object.new
  adder.add(1, 2) # => Error
  stub(adder).add(1, 2) {3}
  adder.add(1, 2) # => 3

= Category4\n(('note:åˆ†é¡4'))

Full text search\n
(('note:å…¨æ–‡æ¤œç´¢'))

= Rroonga

Full text search\n
((*library*))\n
(('note:å…¨æ–‡æ¤œç´¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼'))

= ((*Library*)) vs Client\n(('note:ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼å¯¾ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ'))

  * No server process\n
    (('note:ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ãŒã„ã‚‰ãªã„'))
  * Easy to start\n
    (('note:ç°¡å˜ã«ä½¿ã„å§‹ã‚ã‚‰ã‚Œã‚‹'))
  * Write in Ruby\n
    (('note:Rubyã§æ›¸ã‘ã‚‹'))

= Create DB(('note:ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆï¼‰'))

  # coderay ruby
  require "groonga"

  Groonga::Database.create(path: "/tmp/db")

= Define schema(('note:ï¼ˆã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼‰'))

  # coderay ruby

  Groonga::Schema.define do |schema|
    schema.create_table("docs") do |table|
      # The column to store text
      table.text("content")
    end
    # The index for full text search
    schema.create_lexicon("terms") do |table|
      table.index("docs.content")
    end
  end

= Add records(('note:ï¼ˆãƒ¬ã‚³ãƒ¼ãƒ‰è¿½åŠ ï¼‰'))

  # coderay ruby

  docs = Groonga["docs"]
  docs.add(content: "String#<< concatenates ...")
  docs.add(content: "String#dup duplicates ...")

= Search(('note:ï¼ˆæ¤œç´¢ï¼‰'))

  # coderay ruby

  matches = docs.select do |record|
    record.content.match("concat")
  end
  p matches.size # => 1
  matches.each do |record|
    p record.content # => "String#<< concat..."
  end

= User - Rabbit Slide Show

  # img
  # src = images/rabbit-slide-show.png
  # relative_height = 78

(('tag:center'))
(('tag:small'))
((<URL:https://slide.rabbit-shocker.org/>))

= User - Rurema Search

  # img
  # src = images/rurema-search.png
  # relative_height = 78

(('tag:center'))
(('tag:small'))
((<URL:https://docs.ruby-lang.org/ja/search/>))

= Rurema Search\n(('note:ã‚‹ã‚Šã¾ã‚µãƒ¼ãƒ'))

  * Super fast!\n
    (('note:ã™ã”ãé€Ÿã„ï¼'))
  * Tune for programming document\n
    (('note:ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”¨ã«ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°'))
    * Symbols (@, #, ...) are important\n
      (('note:@ã¨ã‹#ã¨ã‹ã®è¨˜å·ã‚‚å¤§äº‹'))

= User - RDoc Search

  * Planning\n
    (('note:è€ƒãˆã¦ã¯ã„ã‚‹ã‘ã©ã€‚ã€‚ã€‚'))
  * Do you want to work with me?\n
    (('note:ä¸€ç·’ã«ã‚„ã‚ŠãŸã„äººã¯ã„ã‚‹ï¼Ÿ'))

= Rurema and RDoc

  # RT

  Project, Language, Target

  Rurema, Japanese, Japanese Rubyists
  RDoc, English, All Rubyists

= Source\n(('note:ã‚½ãƒ¼ã‚¹'))

  * Shared nothing\n
    (('note:å…±æœ‰ã—ã¦ã„ãªã„'))
    * Copy based share\n
      (('note:å…±æœ‰ã™ã‚‹ã¨ãã¯ã‚³ãƒ”ãƒ¼'))
    * e.g.:\n
      Description,\n
      Sample codes,\n
      ...\n
      (('note:ä¾‹ï¼šèª¬æ˜ã‚„ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãªã©ã‚’ã‚³ãƒ”ãƒ¼'))

= From my point of view\n(('note:ç§ãŒæ€ã†ã“ã¨'))

  * Can we share documents?\n
    (('note:ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…±æœ‰ã§ããªã„ã‹ãª'))
  * How to work together deeply?\n
    (('note:ã‚‚ã£ã¨å”åŠ›ã—ã¦ã§ããªã„ã‹ãª'))

= I18n\n(('note:å›½éš›åŒ–'))

  * Source: RDoc\n
    (('note:ã‚½ãƒ¼ã‚¹ã¯RDoc'))
    * For all Rubyists\n
      (('note:ã“ã‚Œã¯å…¨Rubyistå‘ã‘'))
  * Translate to Japanese\n
    (('note:RDocã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ—¥æœ¬èªã«ç¿»è¨³'))
    * For Japanese Rubyists\n
      (('note:ã“ã‚Œã¯æ—¥æœ¬äººRubyistå‘ã‘'))

= Add i18n support\n(('note:å›½éš›åŒ–ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ '))

  * YARD
    * Since 0.8.0 at 2012-04
  * RDoc
    * Since 4.2.0 at 2014-12

= YARD - i18n

  # coderay console

  # Generates po/yard.pot
  # po/yard.potã‚’ç”Ÿæˆ
  % yard i18n

= YARD - i18n

  # coderay console

  # Create po/ja.po from po/yard.pot
  # po/yard.potã‹ã‚‰po/ja.poã‚’ä½œæˆ
  % msginit \
      --locale=ja_JP.UTF-8 \
      --input=po/yard.pot \
      --output-file=po/ja.po

= YARD - i18n

  # coderay console

  # Translate messages in po/ja.po
  # po/ja.poå†…ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¿»è¨³
  % editor po/ja.po

= YARD - i18n

  # coderay console

  # Generate documents with
  # translated messages
  # ç¿»è¨³ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦
  # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
  % yard --locale ja

= Packnga

Rake task\n
for\n
YARD i18n\n
(('note:YARDã®å›½éš›åŒ–æ©Ÿèƒ½å‘ã‘ã®Rakeã‚¿ã‚¹ã‚¯'))

= Setting\n(('note:è¨­å®š'))

  # coderay ruby

  # Rakefile
  require "packnga"
  Packnga::DocumentTask.new(spec) do |task|
    task.original_language = "en"
    task.translate_languages = ["ja"]
  end

= Workflow\n(('note:ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼'))

  # coderay console

  % rake reference:translate
  % editor doc/po/ja/x.edit.po
  % rake reference:translate
  % editor lib/x.rb
  % rake reference:translate
  ...

= Users\n(('note:ãƒ¦ãƒ¼ã‚¶ãƒ¼'))

  * test-unit
  * Rroonga
  * ...

= RDoc - i18n

  # coderay console

  # Generates doc/rdoc.pot
  # doc/rdoc.potã‚’ç”Ÿæˆ
  % rdoc --format=pot

= RDoc - i18n

  # coderay console

  # Create locale/ja.po
  # from doc/rdoc.pot
  # doc/rdoc.potã‹ã‚‰locale/ja.poã‚’ä½œæˆ
  % mkdir -p locale
  % msginit \
      --locale=ja_JP.UTF-8 \
      --input=doc/rdoc.pot \
      --output-file=locale/ja.po

= RDoc - i18n

  # coderay console

  # Translate messages in locale/ja.po
  # locale/ja.poå†…ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¿»è¨³
  % editor locale/ja.po

= RDoc - i18n

  # coderay console

  # Generate documents with
  # translated messages
  # ç¿»è¨³ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦
  # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
  % rdoc --locale ja

= RDoc, Rurema and i18n

  * No progress...\n
    (('note:ãƒ„ãƒ¼ãƒ«ã®æ•´å‚™ã¾ã§ã§ãã‚Œä»¥é™ã¯é€²ã‚“ã§ã„ãªã„ã€‚ã€‚ã€‚'))
  * Do you want to work with me?\n
    (('note:ä¸€ç·’ã«ã‚„ã‚ŠãŸã„äººã¯ã„ã‚‹ï¼Ÿ'))

= jekyll-task-i18n

Jekyll + i18n

= Features\n(('note:æ©Ÿèƒ½'))

  * Support all markups!\n
    (('note:ã™ã¹ã¦ã®ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—å¯¾å¿œï¼'))
  * GitHub Pages ready!\n
    (('note:GitHub Pagesã§ã‚‚ä½¿ãˆã‚‹ï¼'))

= Setting(('note:ï¼ˆè¨­å®šï¼‰'))

  # coderay ruby

  # Rakefile
  require "jekyll/task/i18n"
  Jekyll::Task::I18n.define do |task|
    task.locales = ["ja"]
    task.files = Rake::FileList["**/*.md"]
    task.files -= Rake::FileList["_*/**/*.md"]
    task.locales.each do |locale|
      task.files -= Rake::FileList["#{locale}/**/*.md"]
    end
  end
  task default: ["jekyll:i18n:translate"]

= Workflow(('note:ï¼ˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼‰'))

  % editor index.md
  % rake
  % editor _po/ja/index.edit.po
  % rake
  % git commit -a

= User - Red Data Tools

  # img
  # src = images/jekyll-task-i18n-red-data-tools.gif
  # relative_height = 78

(('tag:center'))
(('tag:small'))
((<URL:https://red-data-tools.github.io/>))

= groonga-client

Full text search\n
((*client*))\n
(('note:å…¨æ–‡æ¤œç´¢ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ'))

= Library vs ((*Client*))\n(('note:ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼å¯¾ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ'))

  * Less dependencies\n
    (('note:ä¾å­˜é–¢ä¿‚ãŒå°‘ãªã„'))
  * Less needed resource\n
    (('note:å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹ãŒå°‘ãªã„'))

= Search(('note:ï¼ˆæ¤œç´¢ï¼‰'))

  # coderay ruby

  require "groonga/client"
  url = "http://localhost:10041"
  Groonga::Client.open(url: url) do |client|
    response =
      client.select(table: "docs",
                    match_columns: "content",
                    query: "concat")
    p response.n_hits # => 1
  end

= Asynchronous(('note:ï¼ˆéåŒæœŸï¼‰'))

  # coderay ruby

  # Call with block
  client.select(table: "docs",
                match_columns: "content",
                query: "concat") do |response|  
    p response.n_hits # => 1
  end
  p :here # => :here then â†‘
  sleep(0.1)

= Asynchronous - wait

  # coderay ruby

  request =
    client.select(table: "docs",
                  match_columns: "content",
                  query: "concat") do |response|
    p response.n_hits # => 1
  end
  p :here # => :here then â†‘
  request.wait

= groonga-client-rails

Ruby on Rails\n
integration\n
for\n
groonga-client\n
(('note:Ruby on Railsã§ä½¿ã†'))

= Architecture\n(('note:ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¼'))

  * Data: RDBMS\n
    (('note:ãƒ‡ãƒ¼ã‚¿ã¯RDBMSã«æ ¼ç´'))
  * Full text search: Groonga\n
    (('note:å…¨æ–‡æ¤œç´¢ã¯Groongaã§å‡¦ç†'))

= Define app searcher\n(('note:ã‚¢ãƒ—ãƒªç”¨ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚’å®šç¾©'))

  # coderay ruby

  # app/searchers/application_searcher.rb
  class ApplicationSearcher <
          Groonga::Client::Searcher
  end

= Define searcher\n(('note:ã‚µãƒ¼ãƒãƒ£ãƒ¼ã‚’å®šç¾©'))

  # coderay ruby

  # app/searchers/document_searcher.rb
  class DocumentsSearcher < ApplicationSearcher
    # Define a full text search index as "content"
    # å…¨æ–‡æ¤œç´¢ç”¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å®šç¾©
    schema.column :content, {
      type: "Text",
      index: true,
      index_type: :full_text_search,
    }
  end

= Bind to model\n(('note:ãƒ¢ãƒ‡ãƒ«ã¨çµã³ã¤ã‘ã‚‹'))

  # coderay ruby

  # app/models/document.rb
  class Document < ApplicationRecord
    # DocumentsSearcher searches Document model
    source = DocumentsSearcher.source(self)
    # Bind Document's "content" column to
    # DocumentsSearcher's "content" index
    source.content = :content
  end

= Search(('note:ï¼ˆæ¤œç´¢ï¼‰'))

  # coderay ruby

  # app/controllers/documents_controller.rb
  class DocumentsController < ApplicationController
    def index
      @query = params[:query]
      searcher = DocumentSearcher.new
      @result_set = searcher.search.
         query(@query).
         result_set
    end
  end

= See also\n(('note:å‚è€ƒæƒ…å ±'))

  * Tutorial in Japanese\n
    (('note:æ—¥æœ¬èªã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«'))
    * (('tag:xx-small'))
      ((<URL:http://www.clear-code.com/blog/2016/12/22.html>))

= Groonga

mruby embedded\n
full text search engine\n
(('note:mrubyçµ„è¾¼ã®å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³'))

= How mruby is used?\n(('note:mrubyã®ä½¿ã„æ–¹'))

  * Optimizer\n
    (('note:ã‚ªãƒ—ãƒ†ã‚£ãƒã‚¤ã‚¶ãƒ¼'))
  * Custom command\n
    (('note:ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰'))

= Custom command\n(('note:ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰'))

  # coderay ruby

  module Sharding
    class LogicalSelectCommand < Groonga::Command
      # ...
    end
  end

= Use cases\n(('note:åˆ©ç”¨ä¾‹'))

  * Redmine plugin\n
    (('note:Redmineã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³'))
    * (('tag:x-small'))
      Repository: ((<URL:https://github.com/clear-code/redmine_full_text_search>))
    * (('tag:x-small'))
      Slide (in Japanese): ((<URL:https://slide.rabbit-shocker.org/authors/kou/redmine-tokyo-12/>))
  * ...

= Ranguba (WIP)(('note:ï¼ˆé–‹ç™ºä¸­ï¼‰'))

Full text search system\n
(('note:å…¨æ–‡æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ '))

= Use cases\n(('note:åˆ©ç”¨ä¾‹'))

  * File server search\n
    (('note:ãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒ¼ãƒãƒ¼æ¤œç´¢'))
  * Mail search\n
    (('note:ãƒ¡ãƒ¼ãƒ«æ¤œç´¢'))
  * Web site search\n
    (('note:Webã‚µã‚¤ãƒˆæ¤œç´¢'))

= Features\n(('note:æ©Ÿèƒ½'))

  * Crawlers\n
    (('note:ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼'))
  * Web UI
  * Command line interface
    * Update documents\n
      (('note:æ›´æ–°'))
    * Search documents\n
      (('note:æ¤œç´¢'))

= ChupaText

Text extractor\n
(('note:ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º'))

= Supported formats\n(('note:å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ'))

  * PDF
  * Office documents(('note:ï¼ˆã‚ªãƒ•ã‚£ã‚¹æ–‡æ›¸ï¼‰'))
    * OpenDocument, Word, Excel, ...
  * E-mail(('note:ï¼ˆãƒ¡ãƒ¼ãƒ«ï¼‰'))
  * ...

= Interface\n(('note:ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹'))

  * HTTP
  * Web UI
  * Command line interface
  * API (Library)

= Install - Docker

  # coderay console
  % GITHUB=https://github.com
  % git clone \
     ${GITHUB}/ranguba/chupa-text-docker.git
  % cd chupa-text-docker
  % docker-compose up --build

= How to use\n(('note:ä½¿ã„æ–¹'))

  # coderay console
  % curl \
      --form data=@XXX.pdf \
      http://localhost:20080/extraction.json

= Use cases\n(('note:åˆ©ç”¨ä¾‹'))

  * Ranguba
    * Full text search system\n
      (('note:å…¨æ–‡æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ '))
  * Commit e-mail\n
    (('note:ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ¼ãƒ«'))

= git-commit-mailer

Commit e-mail for Git\n
(('note:Gitç”¨ã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ¼ãƒ«'))

= Features\n(('note:æ©Ÿèƒ½'))

  * HTML mail\n
    (('note:HTMLãƒ¡ãƒ¼ãƒ«'))
    * Highlighted diff\n
      (('note:diffã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ'))
  * GitLab/GitHub Web hook\n
    (('note:GitLab/GitHubã®Webãƒ•ãƒƒã‚¯å¯¾å¿œ'))
    * (('tag:xx-small'))
      By ((<"GitHub:clear-code/github-web-hooks-receiver"|URL:https://github.com/clear-code/github-web-hooks-receiver>))

= Users\n(('note:åˆ©ç”¨è€…'))

  * tDiary
  * My products

= commit-email.info

Commit e-mail\n
as a\n
Service\n
(('note:ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ¼ãƒ«ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹'))

= How to use\n(('note:ä½¿ã„æ–¹'))

  * Send a pull request to\n
    ((<"GitHub:kou/commit-email.info"|URL:https://github.com/kou/commit-email.info>))\n
    (('note:pull requestã‚’é€ã‚‹'))
  * Register a Web hook\n
    (('note:Webãƒ•ãƒƒã‚¯ã‚’ç™»éŒ²'))
  * Subscribe your mailing list\n
    (('note:ãƒ¡ãƒ¼ãƒªãƒ³ã‚°ãƒªã‚¹ãƒˆã‚’è³¼èª­'))

(('note:See also ((<URL:http://www.commit-email.info/>))'))

= Category5\n(('note:åˆ†é¡5'))

Data processing\n
(('note:ãƒ‡ãƒ¼ã‚¿å‡¦ç†'))

= csv

CSV parser\n
(('note:CSVãƒ‘ãƒ¼ã‚µãƒ¼'))

= csv - History\n(('note:æ­´å²'))

  * 2003: Import\n
    (('note:Rubyã«å–ã‚Šè¾¼ã¿'))
  * 2007: Replaced with FasterCSV\n
    (('note:FasterCSVã§ç½®ãæ›ãˆ'))
  * 2018: I became a co-maintainer with mrkn\n
    (('note:mrknã¨ä¸€ç·’ã«ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼ã«ãªã£ãŸ'))

= Why?\n(('note:ãªã‚“ã§ï¼Ÿ'))

  * There are many CSV data\n
    (('note:CSVã®ãƒ‡ãƒ¼ã‚¿ã¯ãŸãã•ã‚“ã‚ã‚‹'))
  * Important to process data\n
    (('note:ãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã«CSVãƒ‘ãƒ¼ã‚µãƒ¼ã¯é‡è¦'))

= CSV format problems\n(('note:CSVãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å•é¡Œ'))

  * Slow to parse\n
    (('note:ãƒ‘ãƒ¼ã‚¹ãŒé…ã„'))
  * Too wild\n
    (('note:ãªã‚“ã§ã‚‚ã‚ã‚Š'))

= Red Arrow

Apache Arrow Ruby

= Red Arrow - History\n(('note:æ­´å²'))

  * 2017-02: The first commit\n
    (('note:æœ€åˆã®ã‚³ãƒŸãƒƒãƒˆ'))
  * 2018-05: Became the "official" Ruby bindings of Apache Arrow\n
    (('note:Apache Arrowã®å…¬å¼Rubyãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã«ãªã£ãŸ'))

= Apache Arrow

  * Super fast data format\n
    (('note:ã™ã”ãé€Ÿã„ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ'))
    * For in-memory data\n
      (('note:ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿ç”¨'))
  * Cross-language support\n
    (('note:ã„ã‚ã‚“ãªè¨€èªãŒã‚µãƒãƒ¼ãƒˆ'))
    * Easy to share data with Python, Java, ...\n
      (('note:Pythonã‚„Javaãªã©ã¨ãƒ‡ãƒ¼ã‚¿äº¤æ›ãŒã—ã‚„ã™ã„'))

= Performance(('note:ï¼ˆæ€§èƒ½ï¼‰'))

  # image
  # src = images/csv-arrow.pdf
  # relative_width = 100

== Slide properties

: enable-title-on-image
   false

= Apache Arrow - Position\n(('note:ç«‹ã¡ä½ç½®'))

  * A very important peace\n
    in recent data processing\n
    (('note:æœ€è¿‘ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ç•Œéšˆã§ã¯ã™ã”ãå¤§äº‹ãª1ãƒ”ãƒ¼ã‚¹'))
    * Like JIT for Ruby 3\n
      (('note:Ruby 3ã§ä¾‹ãˆã‚‹ã¨JITã¿ãŸã„ãªæ„Ÿã˜'))

= Red Arrow - Impl.\n(('note:å®Ÿè£…'))

  * Based on Ruby/GI\n
    (('note:Ruby/GIã‚’ä½¿ã£ã¦ã„ã‚‹'))
    * Auto generated bindings\n
      (('note:ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’è‡ªå‹•ç”Ÿæˆ'))

= Extendable load API\n(('note:æ‹¡å¼µå¯èƒ½ãªãƒ­ãƒ¼ãƒ‰API'))

  # coderay ruby

  # Load Apache Arrow data
  Arrow::Table.load("iris.arrow")
  # Load CSV data
  Arrow::Table.load("iris.csv")
  # Load Apache Parquet data
  Arrow::Table.load("iris.parquet")

= Apache Parquet

  * Super fast data format\n
    (('note:ã™ã”ãé€Ÿã„ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ'))
    * For storing analysis target data\n
      (('note:è§£æå¯¾è±¡ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ç”¨'))
  * Widely used\n
    (('note:åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹'))

= Performance(('note:ï¼ˆæ€§èƒ½ï¼‰'))

  # image
  # src = images/csv-arrow-parquet.pdf
  # relative_width = 100

== Slide properties

: enable-title-on-image
   false

= Red Parquet

Apache Parquet

= Red Data Tools

A project to make Ruby data processable\n
(('note:Rubyã§ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ'))

= Red Data Tools - History\n(('note:æ­´å²'))

  * 2017-02: Start(('note:ï¼ˆé–‹å§‹ï¼‰'))
  * 2017-11-: Develop events per month at Tokyo\n
    (('note:æ±äº¬ã§æ¯æœˆé–‹ç™ºã‚¤ãƒ™ãƒ³ãƒˆã‚’é–‹å‚¬'))

= The number of products\n(('note:ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ•°'))

About 20\n
(('note:including Red Arrow and Red Parquet'))\n
(('note:20ãã‚‰ã„'))\n
(('note:Red Arrowã‚„Red Parquetã‚‚Red Data Toolsãƒ—ãƒ­ãƒ€ã‚¯ãƒ„'))

= Red Datasets

Dataset fetcher\n
(('note:ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå–å¾—'))

= Supported datasets\n(('note:å¯¾å¿œãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ'))

  * Iris
  * CIFAR
  * Wikipedia

= Wikipedia

  # coderay ruby

  require "datasets"

  wikipedia = Datasets::WikiPedia.new
  wikipedia.each do |page|
    p page.title
  end

= Wikipedia search

  # coderay ruby

  pages = Groonga["pages"]
  wikipedia = Datasets::WikiPedia.new
  wikipedia.each do |page|
    pages.add(title: page.title,
              content: page.revision.text)
  end
  ruby_pages = pages.select do |record|
    record.match("Ruby")
  end
  p ruby_pages.n_hits

= jekyll-jupyter-notebook

Jekyll\n
(('+'))\n
Jupyter Notebook

= Usage\n(('note:ä½¿ã„æ–¹'))

  {% jupyter_notebook sample.ipynb %}

= Red OpenCV

Computer vision\n
(('note:ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ãƒ“ã‚¸ãƒ§ãƒ³'))

= Camera(('note:ï¼ˆã‚«ãƒ¡ãƒ©ï¼‰'))

  # coderay ruby

  require "cv"
  camera = CV::Camera.new
  image = camera.read
  image.write("capture.jpg")

= Face detect(('note:ï¼ˆé¡”èªè­˜ï¼‰'))

  # coderay ruby

  image_gray = image.convert_color(:bgr2gray)
  classifier = # Face detector
    CV::CascadeClassifier.new("frontalface_alt")
  objects = classifier.detect(image_gray)
  color = CV::Color.new(0, 0, 255)
  objects.each do |object|
    # Draw detected area
    image.draw_rectangle(object, color)
  end
  image.write("detect.jpg")

= Red OpenCV - Impl.\n(('note:å®Ÿè£…'))

  * Based on Ruby/GI\n
    (('note:Ruby/GIã‚’ä½¿ã£ã¦ã„ã‚‹'))
    * Auto generated bindings\n
      (('note:ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’è‡ªå‹•ç”Ÿæˆ'))

= Ad: RubyData Workshop

  * 2018-06-01 15:50/17:20
  * Contents:(('note:ï¼ˆå†…å®¹ï¼‰'))
    * Workshop by mrkn\n
      (('note:mrknã«ã‚ˆã‚‹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—'))
    * Presentations what Red Data Tools did by members\n
      (('note:Red Data Toolsãƒ¡ãƒ³ãƒãƒ¼ã«ã‚ˆã‚‹Red Data Toolsã§ã‚„ã£ã¦ããŸã“ã¨ã®ç´¹ä»‹'))

= Process data with Ruby\n(('note:Rubyã§ãƒ‡ãƒ¼ã‚¿å‡¦ç†'))

  * We're working on it\n
    (('note:Red Data Toolsã¯ç¶™ç¶šã—ã¦å–ã‚Šçµ„ã‚“ã§ã„ã‚‹'))
  * Do you want to work with us?\n
    (('note:ä¸€ç·’ã«ã‚„ã‚ŠãŸã„äººã¯ã„ã‚‹ï¼Ÿ'))

= How to join1(('note:ï¼ˆå‚åŠ æ–¹æ³•1ï¼‰'))

  * Join our chat rooms:\n
    (('note:ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã«å‚åŠ '))
    * en: ((<"Gitter:red-data-tools/en"|URL:https://gitter.im/red-data-tools/en>))
    * ja: ((<"Gitter:red-data-tools/ja"|URL:https://gitter.im/red-data-tools/ja>))
  * Join monthly events at Tokyo\n
    (('note:æ±äº¬ã§ã®æ¯æœˆã®é–‹ç™ºã‚¤ãƒ™ãƒ³ãƒˆã«å‚åŠ '))
    * ((<URL:https://speee.connpass.com/>))

= How to join2(('note:ï¼ˆå‚åŠ æ–¹æ³•2ï¼‰'))

  * Hire a developer to work on\n
    (('note:ã“ã®å•é¡Œã«å–ã‚Šçµ„ã‚€é–‹ç™ºè€…ã‚’é›‡ã†'))
    * e.g.: mrkn by Speee, Inc.\n
      (('note:ä¾‹ï¼šSpeeeã®mrkn'))

= How to join3(('note:ï¼ˆå‚åŠ æ–¹æ³•3ï¼‰'))

  * Order ClearCode to work on it\n
    (('note:ã‚¯ãƒªã‚¢ã‚³ãƒ¼ãƒ‰ã«é–‹ç™ºã®ä»•äº‹ã‚’ç™ºæ³¨'))
  * Join ClearCode to work on it\n
    (('note:ã‚¯ãƒªã‚¢ã‚³ãƒ¼ãƒ‰ã«å…¥ã£ã¦ä»•äº‹ã¨ã—ã¦é–‹ç™ºã‚’é€²ã‚ã‚‹'))

= Wrap up\n(('note:ã¾ã¨ã‚'))

  * I'm working on the followings as a Rubyist\n
    (('note:Rubyistã¨ã—ã¦ã®ç§ã®æ´»å‹•'))
    * Increase what Ruby can\n
      (('note:Rubyã§ã§ãã‚‹ã“ã¨ã‚’å¢—ã‚„ã™'))
    * Maintain libraries\n
      (('note:ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã®ãƒ¡ãƒ³ãƒ†ãƒŠã‚¹'))
  * Do you want to work with me?\n
    (('note:ä¸€ç·’ã«ã‚„ã‚ŠãŸã„äººã¯ã„ã‚‹ï¼Ÿ'))
